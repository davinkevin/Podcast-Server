!function(){"use strict";var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};angular.module("podcastApp",["ps.search","ps.podcast","ps.item","ps.download","ps.player","ps.stats","ps.common","ps.dataservice","ps.config","ps.partial"]);var n=function M(){e(this,M),this.replace=!0,this.restrict="E",this.scope=!0,this.templateUrl="html/authorize-notification.html",this.controllerAs="an",this.controller="authorizeNotificationController"},a=function(){function n(t,a){e(this,n),this.$window=t,this.$notification=a,this.state=this.hasToBeShown()}return n.$inject=["$window","$notification"],t(n,[{key:"manuallyactivate",value:function(){var t=this;this.$notification.requestPermission().then(function(){t.state=t.hasToBeShown()})}},{key:"hasToBeShown",value:function(){return"Notification"in this.$window&&"granted"!=this.$window.Notification.permission}}]),n}();angular.module("authorize-notification",["notification"]).directive("authorizeNotification",function(){return new n}).controller("authorizeNotificationController",a),angular.module("ps.common",["ps.filters","navbar","authorize-notification","device-detection"]);var i=function(){function n(t){e(this,n),this.$window=t}return n.$inject=["$window"],t(n,[{key:"isTouchedDevice",value:function(){return"ontouchstart"in this.$window}}]),n}();angular.module("device-detection",[]).service("deviceDetectorService",i),angular.module("ps.filters",[]).filter("htmlToPlaintext",function(){return function(t){return String(t||"").replace(/<[^>]+>/gm,"")}}),_.mixin({updateinplace:function(t,e){var n=void 0===arguments[2]?function(t,e){return t.indexOf(e)}:arguments[2],a=void 0===arguments[3]?!1:arguments[3];return _.forEachRight(t.slice(),function(a,i){return-1===n(e,a)&&t.splice(i,1)}),_.forEach(e,function(e){return-1===n(t,e)&&t.push(e)}),a&&_.forEach(e,function(e,a){var i=t.splice(n(t,e),1)[0];t.splice(a,0,i)}),t}});var o=function O(){e(this,O),this.navCollapsed=!0},s=function(){function n(){e(this,n),this.transclude=!0,this.replace=!0,this.restrict="E",this.scope=!0,this.templateUrl="html/navbar.html",this.controller="navbarController",this.controllerAs="navbar"}return t(n,[{key:"link",value:function(t,e){e.removeClass("hidden")}}]),n}();angular.module("navbar",[]).directive("navbar",function(){return new s}).controller("navbarController",o),angular.module("ps.config",["ps.config.route","ps.config.loading","ps.config.restangular","ps.config.ngstomp","ps.config.module"]),angular.module("ps.config.loading",["angular-loading-bar"]).config(["cfpLoadingBarProvider",function(t){t.includeSpinner=!1}]),angular.module("ps.config.module",["ngTouch","ngAnimate","ui.bootstrap","truncate"]),angular.module("ps.config.ngstomp",["AngularStompDK"]).config(["ngstompProvider",function(t){return t.url("/ws").credential("login","password")["class"](SockJS)}]),angular.module("ps.config.restangular",["restangular"]).config(["RestangularProvider",function(t){t.setBaseUrl("/api/"),t.addElementTransformer("items",!1,function(t){return t.addRestangularMethod("reset","get","reset"),t.addRestangularMethod("download","get","addtoqueue"),t})}]),angular.module("ps.config.route",["ngRoute","cfp.hotkeys"]).constant("commonKey",[["h","Goto Home",function(t){t.preventDefault(),window.location.href="#/items"}],["s","Goto Search",function(t){t.preventDefault(),window.location.href="#/item/search"}],["p","Goto Podcast List",function(t){t.preventDefault(),window.location.href="#/podcasts"}],["d","Goto Download List",function(t){t.preventDefault(),window.location.href="#/download"}]]).config(["$routeProvider",function(t){return t.otherwise({redirectTo:"/items"})}]).config(["$locationProvider",function(t){return t.html5Mode(!0)}]),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/authorize-notification.html",'<div ng-show="an.state" class="alert alert-info text-center" role="alert">\n    <a ng-click="an.manuallyactivate()" class="btn btn-primary">Activer Notification</a>\n</div>\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/download.html",'<div class="container downloadList">\n\n    <div class="row form-horizontal" style="margin-top: 15px;">\n        <div class="col-xs-offset-1 col-md-offset-1 col-sm-offset-1 col-lg-offset-1 form-group col-md-6 col-lg-6 col-xs-6 col-sm-6 ">\n            <label class="pull-left control-label">Téléchargements simultanés</label>\n            <div class="col-md-3 col-lg-3 col-xs-3 col-sm-3">\n                <input ng-model="dc.numberOfSimDl" ng-change="dc.updateNumberOfSimDl(numberOfSimDl)" type="number" class="form-control" placeholder="Number of download">\n            </div>\n        </div>\n        <div class="btn-group pull-right">\n            <button ng-click="dc.restartAllDownload()" type="button" class="btn btn-default">Démarrer</button>\n            <button ng-click="dc.pauseAllDownload()" type="button" class="btn btn-default">Pause</button>\n            <button ng-click="dc.stopAllDownload()" type="button" class="btn btn-default">Stop</button>\n        </div>\n    </div>\n    <div class="media"  ng-repeat="item in dc.items | orderBy:\'-progression\' track by item.id" >\n\n        <div class="buttonList pull-right">\n            <br/>\n            <button ng-click="dc.toggleDownload(item)" type="button" class="btn btn-sm"\n                    ng-class="{\'btn-primary\' : item.status === \'Started\', \'btn-warning\' : item.status === \'Paused\'}"><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i></button>\n            <button ng-click="dc.stopDownload(item)" type="button" class="btn btn-danger btn-sm"><span class="glyphicon glyphicon-stop"></span></button>\n        </div>\n\n        <a class="pull-left" ng-href="/podcasts/{{item.podcastId}}/item/{{item.id}}">\n            <img ng-src="{{item.cover.url}}" >\n        </a>\n\n        <div class="media-body">\n            <h5 class="media-heading">{{item.title | characters:100}}</h5>\n            <br/>\n            <progressbar class="progress-striped active" animate="false" value="item.progression" type="{{ dc.getTypeFromStatus(item) }}">{{item.progression}}%</progressbar>\n        </div>\n    </div>\n\n\n    <br/>\n\n    <accordion close-others="true" ng-show="dc.waitingitems.length > 0">\n        <accordion-group is-open="true">\n            <accordion-heading>\n                Liste d\'attente <span class="pull-right badge">{{ dc.waitingitems.length }}</span>\n            </accordion-heading>\n            <div class="media item-in-waiting-list clearfix"  ng-repeat="item in dc.waitingitems track by item.id"  >\n\n                <div class="pull-right">\n                    <br/>\n                    <button ng-click="dc.removeFromQueue(item)" type="button" class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-minus"></i></button>\n                    <button ng-click="dc.dontDonwload(item)" type="button" class="btn btn-danger btn-sm"><i class="glyphicon glyphicon-stop"></i></button>\n                    <div class="btn-group" dropdown is-open="isopen" ng-show="dc.waitingitems.length > 1">\n                        <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle><i class="ionicons ion-android-more"></i></button>\n                        <ul class="dropdown-menu" role="menu">\n                            <li ng-hide="$first"><a ng-click="dc.moveInWaitingList(item, 0)"><span class="fa fa-angle-double-up"></span> Premier</a></li>\n                            <li><a ng-hide="$first || $index === 1" ng-click="dc.moveInWaitingList(item, $index-1)"><span class="fa fa-angle-up"></span> Monter</a></li>\n                            <li><a ng-hide="$last || $index === dc.waitingitems.length-2" ng-click="dc.moveInWaitingList(item, $index+1)"><span class="fa fa-angle-down"></span> Descendre</a></li>\n                            <li><a ng-hide="$last" ng-click="dc.moveInWaitingList(item, dc.waitingitems.length-1   )"><span class="fa fa-angle-double-down"></span> Dernier</a></li>\n                        </ul>\n                    </div>\n                </div>\n\n                <a class="pull-left" ng-href="/podcasts/{{item.podcastId}}/item/{{item.id}}">\n                    <img ng-src="{{item.cover.url}}">\n                </a>\n\n                <div class="media-body">\n                    <h5 class="media-heading">{{item.title | characters:100}}</h5>\n                </div>\n            </div>\n\n        </accordion-group>\n    </accordion>\n\n\n</div>')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/item-detail.html",'\n<div class="container item-details">\n\n    <br/>\n    <ol class="breadcrumb">\n        <li><a href="/podcasts">Podcasts</a></li>\n        <li><a ng-href="/podcasts/{{ idc.item.podcast.id }}"> {{ idc.item.podcast.title }}</a></li>\n        <li class="active">{{ idc.item.title }}</li>\n    </ol>\n\n    <div>\n        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n            <div class="thumbnail">\n                <a ng-href="{{ idc.item.proxyURL || idc.item.url }}" target="_self">\n                    <img class="center-block" ng-src="{{idc.item.cover.url}}" width="200" height="200">\n                </a>\n\n                <div class="caption">\n\n                    <div class="buttonList text-center">\n                        <!-- Téléchargement en cours -->\n                        <span ng-show="idc.item.status == \'Started\' || idc.item.status == \'Paused\'" >\n                            <button ng-click="idc.toggleDownload(idc.item)" type="button" class="btn btn-primary "><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i></button>\n                            <button ng-click="idc.stopDownload(idc.item)" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-stop"></span></button>\n                        </span>\n\n                        <!-- Lancer le téléchargement -->\n                        <button ng-click="idc.item.download()" ng-show="(idc.item.status != \'Started\' && idc.item.status != \'Paused\' ) && !idc.item.isDownloaded" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-save"></span></button>\n\n                        <a ng-href="/podcasts/{{ idc.item.podcast.id }}/item/{{ idc.item.id }}/play" ng-show="idc.item.isDownloaded" type="button" class="btn btn-success"><span class="ionicons ion-social-youtube"></span></a>\n\n                        <!-- Add to Playlist -->\n                        <a ng-show="idc.item.isDownloaded" ng-click="idc.toggleInPlaylist()" type="button" class="btn btn-primary">\n                            <span ng-hide="idc.isInPlaylist()" class="glyphicon glyphicon-plus"></span>\n                            <span ng-show="idc.isInPlaylist()" class="glyphicon glyphicon-minus"></span>\n                        </a>\n\n                        <div class="btn-group" dropdown is-open="isopen">\n                            <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle><i class="ionicons ion-android-more"></i></button>\n                            <ul class="dropdown-menu dropdown-menu-right" role="menu">\n                                <li ng-show="idc.item.isDownloaded"><a target="_self" ng-href="{{ idc.item.proxyURL }}"><span class="glyphicon glyphicon-play text-success"></span> Lire</a></li>\n                                <li><a ng-click="idc.remove(idc.item)" ng-show="(idc.item.status != \'Started\' && idc.item.status != \'Paused\' )"><span class="glyphicon glyphicon-remove text-danger"></span> Retirer</a></li>\n                                <li><a ng-href="{{ idc.item.url }}" target="_self"><span class="glyphicon glyphicon-globe text-info"></span> Lire en ligne</a></li>\n                                <li><a ng-click="idc.reset(idc.item)"><span class="glyphicon glyphicon-repeat"></span> Reset</a></li>\n                            </ul>\n                        </div>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">\n            <div class="panel panel-default">\n                <div class="panel-heading">\n                    <h3 class="panel-title">{{ idc.item.title }}</h3>\n                </div>\n                <div class="panel-body">\n                    {{ idc.item.description | htmlToPlaintext }}\n                </div>\n                <div class="panel-footer">Date de publication : <strong>{{idc.item.pubdate | date : \'dd/MM/yyyy à HH:mm\' }}</strong></div>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/item-player.html",'<div class="container item-player">\n    <br/>\n    <ol class="breadcrumb">\n        <li><a href="/podcasts">Podcasts</a></li>\n        <li><a ng-href="/podcasts/{{ ipc.item.podcast.id }}"> {{ ipc.item.podcast.title }}</a></li>\n        <li class="active"><a ng-href="/podcasts/{{ ipc.item.podcast.id }}/item/{{ ipc.item.id }}">{{ ipc.item.title }}</a></li>\n    </ol>\n\n    <div ng-show="ipc.item.isDownloaded" class="videogular-container">\n        <videogular vg-theme="ipc.config.theme.url" vg-auto-play="ipc.config.autoPlay" >\n            <vg-media vg-src="ipc.config.sources" vg-native-controls="false"></vg-media>\n\n            <vg-controls vg-autohide="ipc.config.sources[0].type.indexOf(\'audio\') === -1 && ipc.config.plugins.controls.autoHide" vg-autohide-time="ipc.config.plugins.controls.autoHideTime">\n                <vg-play-pause-button></vg-play-pause-button>\n                <vg-time-display>{{ currentTime | date:\'mm:ss\' }}</vg-time-display>\n                <vg-scrub-bar>\n                    <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\n                </vg-scrub-bar>\n                <vg-time-display>{{ timeLeft | date:\'mm:ss\' }}</vg-time-display>\n                <vg-volume>\n                    <vg-mute-button></vg-mute-button>\n                    <vg-volume-bar></vg-volume-bar>\n                </vg-volume>\n                <vg-fullscreen-button ng-show="ipc.config.sources[0].type.indexOf(\'audio\') === -1"></vg-fullscreen-button>\n                <div class=\'btn-video-share\'><a target="_self" ng-href="{{ ipc.item.proxyURL }}" class="ionicons ion-android-share"></a></div>\n            </vg-controls>\n\n            <vg-overlay-play></vg-overlay-play>\n            \n            <vg-poster vg-url=\'ipc.config.plugins.poster\'></vg-poster>\n        </videogular>\n    </div>\n</div>')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/items-search.html",'\n<div class="container item-listing" ng-swipe-right="isc.swipePage(-1)" ng-swipe-left="isc.swipePage(1)">\n    <!--<div class="col-xs-11 col-sm-11 col-lg-11 col-md-11">-->\n\n    <div class="form-inline search-bar row" ng-show="isc.search">\n        <div class="form-group col-sm-3 col-md-3 col-lg-3">\n            <div class="input-group">\n                <input type="text" class="form-control" ng-model="isc.searchParameters.term" placeholder="Recherche globale" ng-change="isc.resetSearch()" ng-model-options="{ debounce: 500 }">\n                <span class="input-group-addon" ng-click="isc.searchParameters.term = \'\'; isc.resetSearch()"><i class="ionicons ion-android-cancel"></i></span>\n            </div>\n        </div>\n\n        <div class="form-group col-sm-3 col-md-5 col-lg-5">\n            <div class="input-group input-group-tags-input">\n                <tags-input placeholder="Search by Tags" add-from-autocomplete-only="true" ng-model="isc.searchParameters.tags" display-property="name" class="bootstrap" on-tag-added="isc.resetSearch()" on-tag-removed="isc.resetSearch()">\n                    <auto-complete source="isc.loadTags($query)" min-length="2"></auto-complete>\n                </tags-input>\n                <span class="input-group-addon" ng-click="isc.searchParameters.tags = []; isc.resetSearch()"><i class="ionicons ion-android-cancel"></i></span>\n            </div>\n        </div>\n\n        <div class="form-group col-sm-3 col-md-2 col-lg-2">\n            <select class="form-control" ng-model="isc.searchParameters.properties" ng-change="isc.resetSearch()">\n                <option value>Tri</option>\n                <option value="pertinence">Pertinence</option>\n                <option value="pubdate">Date publication</option>\n                <option value="downloadDate">Date de download</option>\n            </select>\n        </div>\n\n        <div class="form-group col-sm-3 col-md-2 col-lg-2">\n            <!--<select class="form-control" ng-model="searchParameters.direction" ng-change="changePage()" ng-disabled="searchParameters.properties === \'pertinence\'">-->\n            <select class="form-control" ng-model="isc.searchParameters.direction" ng-change="isc.resetSearch()">\n                <option value>Ordre</option>\n                <option value="DESC">Descendant</option>\n                <option value="ASC">Ascendant</option>\n            </select>\n        </div>\n    </div>\n\n    <div class="text-center row" >\n        <pagination ng-show="isc.totalPages > 1" items-per-page="12" max-size="10" boundary-links="true" total-items="isc.totalItems" ng-model="isc.currentPage" ng-change="isc.changePage()" class="pagination pagination-centered" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\n        <a ng-click="isc.search = !isc.search;" ng-class="{\'btn-primary\' : isc.search, \'btn-default\' : !isc.search}" class="btn pull-right search-button"><i class="glyphicon glyphicon-search"></i></a>\n    </div>\n    <div class="row">\n        <div ng-repeat="item in isc.items track by item.id" class="col-lg-3  col-md-3 col-sm-4 col-xs-6 itemInList">\n            <div class="box">\n                <div class="">\n                    <img ng-class="{\'img-grayscale\' : (!item.isDownloaded) }" ng-src="{{ item.cover.url }}" alt="" class="img-responsive" />\n                    <div class="overlay-button">\n                        <div class="btn-group" dropdown>\n                            <button type="button" class="btn dropdown dropdown-toggle" dropdown-toggle><i class="ionicons ion-android-more"></i></button>\n                            <ul class="dropdown-menu dropdown-menu-right" role="menu">\n                                <li ng-show="item.status == \'Started\' || item.status == \'Paused\'">\n                                    <a ng-show="item.status == \'Started\'" ng-click="isc.toggleDownload(item)"><i class="glyphicon glyphicon-play text-primary"></i><i class="glyphicon glyphicon-pause text-primary"></i> Mettre en pause</a>\n                                    <a ng-show="item.status == \'Paused\'" ng-click="isc.toggleDownload(item)"><i class="glyphicon glyphicon-play text-primary"></i><i class="glyphicon glyphicon-pause text-primary"></i> Reprendre</a>\n                                </li>\n                                <li ng-show="item.status == \'Started\' || item.status == \'Paused\'">\n                                    <a ng-click="isc.stopDownload(item)">\n                                        <span class="glyphicon glyphicon-stop text-danger"></span> Stopper\n                                    </a>\n                                </li>\n                                <li ng-show="(item.status != \'Started\' && item.status != \'Paused\' ) && !item.isDownloaded">\n                                    <a ng-click="item.download()">\n                                        <span class="glyphicon glyphicon-save text-primary"></span> Télécharger\n                                    </a>\n                                </li>\n                                <li>\n                                    <a ng-href="/podcasts/{{ item.podcastId }}/item/{{ item.id }}/play" ng-show="item.isDownloaded">\n                                        <span class="ionicons ion-social-youtube text-success"></span> Lire dans le player\n                                    </a>\n                                </li>\n                                <li ng-show="item.isDownloaded">\n                                    <a ng-click="isc.addOrRemove(item)">\n                                        <span ng-hide="isc.isInPlaylist(item)"><span class="glyphicon glyphicon-plus text-primary"></span> Ajouter à la Playlist</span>\n                                        <span ng-show="isc.isInPlaylist(item)"><span class="glyphicon glyphicon-minus text-primary"></span> Retirer de la Playlist</span>\n                                    </a>\n                                </li>\n                                <li>\n                                    <a ng-click="isc.remove(item)"><span class="glyphicon glyphicon-remove text-danger"></span> Supprimer</a>\n                                </li>\n                                <li>\n                                    <a ng-click="isc.reset(item)"><span class="glyphicon glyphicon-repeat"></span> Reset</a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <a class="overlay-main-button" target="_self" ng-href="{{ item.proxyURL  }}" >\n                        <span ng-class="{\'glyphicon-globe\' : (!item.isDownloaded), \'glyphicon-play\' : (item.isDownloaded)}" class="glyphicon "></span>\n                    </a>\n                </div>\n                <div class="text-center clearfix itemTitle center" >\n                    <a ng-href="/podcasts/{{item.podcastId}}/item/{{item.id}}" tooltip-append-to-body="true" tooltip="{{ item.title }}" tooltip-placement="bottom" >\n                        {{ item.title | characters:30 }}\n                    </a>\n                </div>\n                <div class="text-center row-button">\n                        <span ng-show="item.status == \'Started\' || item.status == \'Paused\'" >\n                            <button ng-click="isc.toggleDownload(item)" type="button" class="btn btn-primary "><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i></button>\n                            <button ng-click="isc.stopDownload(item)" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-stop"></span></button>\n                        </span>\n\n                    <button ng-click="item.download()" ng-show="(item.status != \'Started\' && item.status != \'Paused\' ) && !item.isDownloaded" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-save"></span></button>\n                    <a target="_self" ng-href="{{ item.proxyURL }}" ng-show="!item.isDownloaded" type="button" class="btn btn-info"><span class="glyphicon glyphicon-globe"></span></a>\n\n                    <a target="_self" ng-href="{{ item.proxyURL }}" ng-show="item.isDownloaded" type="button" class="btn btn-success"><span class="glyphicon glyphicon-play"></span></a>\n                    <button ng-click="isc.remove(item)" ng-show="item.isDownloaded" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-remove"></span></button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--</div>-->\n    <div class="text-center row" ng-show="isc.totalPages > 1">\n        <pagination items-per-page="12" max-size="10" boundary-links="true" total-items="isc.totalItems" ng-model="isc.currentPage" ng-change="isc.changePage()" class="pagination pagination-centered" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\n    </div>\n</div>\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/navbar.html",'<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <a class="navbar-brand" href="/items">Podcast Server</a>\n            <ul class="nav navbar-nav pull-right" ng-transclude></ul>\n        </div>\n    </div>\n</nav>')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/player.html",'<div class="container video-player">\n    <br/>\n    <div class="col-lg-8 player">\n        <videogular vg-auto-play="pc.config.autoPlay" vg-player-ready="pc.onPlayerReady($API)" vg-complete="pc.onCompleteVideo()">\n            <vg-media vg-src="pc.config.sources" vg-native-controls="false" vg-preload="pc.config.preload"></vg-media>\n\n            <vg-controls vg-autohide="pc.config.sources[0].type.indexOf(\'audio\') === -1 && pc.config.plugins.controls.autoHide" vg-autohide-time="pc.config.plugins.controls.autoHideTime">\n                <vg-play-pause-button></vg-play-pause-button>\n                <vg-time-display>{{ currentTime | date:\'mm:ss\' }}</vg-time-display>\n                <vg-scrub-bar>\n                    <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\n                </vg-scrub-bar>\n                <vg-time-display>{{ timeLeft | date:\'mm:ss\' }}</vg-time-display>\n                <vg-volume>\n                    <vg-mute-button></vg-mute-button>\n                    <vg-volume-bar></vg-volume-bar>\n                </vg-volume>\n                <vg-fullscreen-button ng-show="pc.config.sources[0].type.indexOf(\'audio\') === -1"></vg-fullscreen-button>\n                <div class=\'btn-video-share\'><a target="_self" ng-href="{{ pc.config.sources[0].src }}" class="ionicons ion-android-share"></a></div>\n            </vg-controls>\n\n            <vg-overlay-play></vg-overlay-play>\n\n            <vg-poster vg-url=\'pc.config.plugins.poster\'></vg-poster>\n        </videogular>\n    </div>\n    <div class="playlist col-lg-4">\n        <div class="row button-list">\n            <div class="col-lg-6 col-sm-6 col-xs-6 col-md-6 text-center" ng-click="pc.reloadPlaylist()"><span class="ionicons ion-refresh"></span> Rafraichir</div>\n            <div class="col-lg-6 col-sm-6 col-xs-6 col-md-6 text-center" ng-click="pc.removeAll ()"><span class="ionicons ion-trash-b"></span> Vider</div>\n        </div>\n        <div class="media clearfix"  ng-repeat="item in pc.playlist track by item.id" ng-class="{\'isReading\' : pc.currentVideo.id === item.id}">\n\n            <button ng-click="pc.remove(item)" type="button" class="pull-right close"><span aria-hidden="true">&times;</span></button>\n\n            <a class="pull-left cover" ng-click="pc.setVideo($index)">\n                <img ng-src="{{item.cover.url}}" width="100" height="100" style="">\n            </a>\n\n            <div class="media-body">\n                <p ng-click="pc.setVideo($index)" class="">{{ item.title }}</p>\n            </div>\n        </div>\n        \n    </div>\n\n</div>')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcast-creation.html",'<div class="jumbotron">\n    <div class="container">\n        <h1>Ajouter un Podcast</h1>\n    </div>\n</div>\n\n<div class="container">\n    <form class="form-horizontal" role="form" novalidate>\n        <div class="form-group">\n            <label for="title" class="col-sm-1 control-label">Titre</label>\n\n            <div class="col-sm-10">\n                <input type="text" class="form-control" id="title" ng-model="pac.podcast.title" required placeholder="Titre">\n            </div>\n        </div>\n        <div class="form-group">\n            <label for="url" class="col-sm-1 control-label">URL</label>\n\n            <div class="col-sm-10">\n                <input type="url" class="form-control" id="url" ng-model="pac.podcast.url" required placeholder="url" ng-change="pac.changeType();pac.findInfo();">\n            </div>\n        </div>\n        <div class="form-group">\n            <label for="url" class="col-sm-1 control-label">Tags</label>\n            <div class="col-sm-10">\n                <tags-input ng-model="pac.podcast.tags" display-property="name" min-length="1" class="bootstrap" placeholder="Ajouter un tag">\n                    <auto-complete source="pac.loadTags($query)" min-length="2"></auto-complete>\n                </tags-input>\n            </div>\n        </div>\n        <div class="form-group">\n            <label for="height" class="col-sm-1 control-label">Type</label>\n\n            <div class="col-sm-10">\n                <select class="form-control" ng-model="pac.podcast.type">\n                    <option ng-repeat="type in pac.types | orderBy: \'name\'" value="{{type.key}}">{{ type.name }}</option>\n                </select>\n            </div>\n        </div>\n\n        <div class="checkbox">\n            <label>\n                <input type="checkbox" ng-model="pac.podcast.hasToBeDeleted"> Suppression Automatique\n            </label>\n        </div>\n\n        <br/>\n\n        <div class="col-md-2 col-md-offset-1 text-center">\n            <img ng-src="{{ pac.podcast.cover.url || \'http://placehold.it/200x200\' }}" class="img-thumbnail" width="200" height="200">\n        </div>\n        <div class="col-xs-12 col-md-9">\n            <div class="form-group">\n                <label for="url" class="col-sm-2 control-label">URL</label>\n\n                <div class="col-sm-9">\n                    <input class="form-control" ng-model="pac.podcast.cover.url" required placeholder="url">\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="width" class="col-sm-2 control-label">Lageur</label>\n\n                <div class="col-sm-3">\n                    <input type="number" class="form-control" id="width" ng-model="pac.podcast.cover.width" required>\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="height" class="col-sm-2 control-label">Hauteur</label>\n\n                <div class="col-sm-3">\n                    <input type="number" class="form-control" id="height" ng-model="pac.podcast.cover.height" required>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="form-group">\n            <div class="col-sm-offset-2 col-sm-10">\n                <button ng-click="pac.save()" class="btn btn-default">Sauvegarder</button>\n            </div>\n        </div>\n    </form>\n</div>\n\n\n\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcast-detail.html",'\n\n<div class="container">\n    <br/>\n    <ol class="breadcrumb">\n        <li><a href="/podcasts">Podcasts</a></li>\n        <li><a class="active"> {{ pdc.podcast.title }}</a></li>\n    </ol>\n\n    <div>\n        <div class="jumbotron podcast-details-header" ng-style="{ \'background-image\' : \'url(\\\'\'+ pdc.podcast.cover.url + \'\\\')\'}">\n            <div class="information-area">\n                <div class="information-text">\n                    <h3><strong>{{ pdc.podcast.title }}</strong></h3>\n                    <p>{{ pdc.podcast.totalItems }} Episodes</p>\n                </div>\n                <div class="action-button pull-right">\n                    <button ng-click="pdc.refresh()" type="button" class="btn btn-default"><span class="glyphicon glyphicon-refresh"></span></button>\n                    <a type="button" class="btn btn-default" target="_self" ng-href="/api/podcast/{{ pdc.podcast.id }}/rss"><span class="ionicons ion-social-rss"></span></a>\n                </div>\n            </div>\n        </div>\n    </div>\n<br/>\n\n<div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">\n\n    <tabset>\n        <tab heading="{{ pdc.podcastTabs[0].heading }}" active="pdc.podcastTabs[0].active" >\n            <podcast-items-list podcast="pdc.podcast"></podcast-items-list>\n        </tab>\n        <tab heading="{{ pdc.podcastTabs[1].heading }}" active="pdc.podcastTabs[1].active" >\n            <podcast-edition podcast="pdc.podcast"></podcast-edition>\n        </tab>\n        <tab heading="{{ pdc.podcastTabs[2].heading }}" ng-hide="pdc.podcastTabs[2].disabled" active="pdc.podcastTabs[2].active" disabled="pdc.podcastTabs[2].disabled">\n            <podcast-upload podcast="pdc.podcast"></podcast-upload>\n        </tab>\n        <tab heading="{{ pdc.podcastTabs[3].heading }}" ng-hide="pdc.podcastTabs[3].disabled" active="pdc.podcastTabs[3].active" disabled="pdc.podcastTabs[3].disabled">\n            <podcast-stats podcast="pdc.podcast"></podcast-stats>\n        </tab>\n    </tabset>\n\n\n</div>\n    </div>\n\n\n\n');

}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcast-details-edition.html",'<br/>\n<accordion close-others="true">\n    <accordion-group heading="Podcast" is-open="true">\n        <form class="form-horizontal" role="form">\n            <div class="form-group">\n                <label for="title" class="col-sm-2 control-label">Titre</label>\n                <div class="col-sm-10">\n                    <input type="text" class="form-control" id="title" ng-model="pec.podcast.title" required placeholder="Titre">\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="url" class="col-sm-2 control-label">URL</label>\n                <div class="col-sm-10">\n                    <input type="url" class="form-control" id="url" ng-model="pec.podcast.url" required placeholder="url">\n                </div>\n            </div>\n            <div class="form-group">\n                <div class="checkbox col-sm-offset-3">\n                    <label>\n                        <input type="checkbox" ng-model="pec.podcast.hasToBeDeleted"> Suppression Auto\n                    </label>\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="url" class="col-sm-2 control-label">Tags</label>\n                <div class="col-sm-10">\n                    <tags-input ng-model="pec.podcast.tags" display-property="name" min-length="1" class="bootstrap" placeholder="Ajouter un tag">\n                        <auto-complete source="pec.loadTags($query)" min-length="2"></auto-complete>\n                    </tags-input>\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="height" class="col-sm-2 control-label" >Type</label>\n                <div class="col-sm-10" >\n                    <select class="form-control" ng-model="pec.podcast.type">\n                        <option value="BeInSports">Be In Sports</option>\n                        <option value="CanalPlus">Canal+</option>\n                        <option value="JeuxVideoCom">Jeux Video Com</option>\n                        <option value="JeuxVideoFR">Jeux Video Fr</option>\n                        <option value="Parleys">Parleys</option>\n                        <option value="Pluzz">Pluzz</option>\n                        <option value="RSS">RSS</option>\n                        <option value="send">Send</option>\n                        <option value="Youtube">Youtube</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <button ng-click="pec.save()" class="btn btn-default">Sauvegarder</button>\n                </div>\n            </div>\n        </form>\n    </accordion-group>\n    <accordion-group heading="Cover">\n        <form class="form-horizontal" role="form">\n            <div class="form-group">\n                <label for="url" class="col-sm-2 control-label">URL</label>\n                <div class="col-sm-10">\n                    <input type="url" class="form-control" id="url" ng-model="pec.podcast.cover.url" required placeholder="url">\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="width" class="col-sm-2 control-label">Lageur</label>\n                <div class="col-sm-10">\n                    <input type="number" class="form-control" id="width" ng-model="pec.podcast.cover.width" required placeholder="url">\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="height" class="col-sm-2 control-label">Hauteur</label>\n                <div class="col-sm-10">\n                    <input type="number" class="form-control" id="height" ng-model="pec.podcast.cover.height" required placeholder="url">\n                </div>\n            </div>\n\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <button ng-click="pec.save()" class="btn btn-default">Sauvegarder</button>\n                </div>\n            </div>\n        </form>\n    </accordion-group>\n    <accordion-group heading="Actions">\n        <button type="button" class="btn btn-warning" ng-click="pec.deletePodcast()">\n            <span class="glyphicon glyphicon-trash"></span> Delete\n        </button>\n    </accordion-group>\n</accordion>\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcast-details-episodes.html",'<br/>\n<div ng-swipe-right="pic.swipePage(-1)" ng-swipe-left="pic.swipePage(1)">\n    <div class="media clearfix"  ng-repeat="item in pic.podcast.items | orderBy:\'-pubdate\' track by item.id">\n        <div class="buttonList pull-right">\n            <!-- Téléchargement en cours -->\n        <span ng-show="item.status == \'Started\' || item.status == \'Paused\'" >\n            <button ng-click="pic.toggleDownload(item)" type="button" class="btn btn-primary "><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i></button>\n            <button ng-click="pic.stopDownload(item)" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-stop"></span></button>\n        </span>\n\n            <!-- Lancer le téléchargement -->\n            <button ng-click="item.download()" ng-show="(item.status != \'Started\' && item.status != \'Paused\' ) && !item.isDownloaded" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-save"></span></button>\n\n            <!-- Lire dans le player -->\n            <a ng-href="/podcasts/{{ item.podcastId }}/item/{{ item.id }}/play" ng-show="item.isDownloaded" type="button" class="btn btn-success"><span class="ionicons ion-social-youtube"></span></a>\n            \n            <!-- Supprimer l\'item -->\n            <button ng-click="pic.remove(item)" ng-show="(item.status != \'Started\' && item.status != \'Paused\' )" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-remove"></span></button>\n\n            <!-- Menu complémentaire -->\n            <div class="btn-group" dropdown is-open="isopen">\n                <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle><i class="ionicons ion-android-more"></i></button>\n                <ul class="dropdown-menu dropdown-menu-right" role="menu">\n                    <li ng-show="item.isDownloaded"><a target="_self" ng-href="{{ item.proxyURL }}"><span class="glyphicon glyphicon-play text-success"></span> Lire</a></li>\n                    <li ng-show="item.isDownloaded">\n                        <a ng-hide="pic.isInPlaylist(item)" ng-click="pic.addOrRemoveInPlaylist(item)">\n                            <span class="glyphicon glyphicon-plus text-primary"></span> Ajouter à la Playlist\n                        </a>\n                        <a ng-show="pic.isInPlaylist(item)" ng-click="pic.addOrRemoveInPlaylist(item)">\n                            <span class="glyphicon glyphicon-minus text-primary"></span> Retirer de la Playlist\n                        </a>\n                    </li>\n                    <li><a target="_self" ng-href="{{ item.url }}"><span class="glyphicon glyphicon-globe text-info"></span> Lire en ligne</a></li>\n                    <li><a ng-click="pic.reset(item)"><span class="glyphicon glyphicon-repeat"></span> Reset</a></li>\n                </ul>\n            </div>\n        </div>\n\n        <a class="pull-left" ng-href="/podcasts/{{pic.podcast.id}}/item/{{item.id}}">\n            <img ng-src="{{item.cover.url}}" width="100" height="100" style="">\n        </a>\n        \n        <div class="media-body">\n            <h4 class="media-heading">{{ item.title }}</h4>\n            <p class="description hidden-xs hidden-sm branch-name">{{item.description | htmlToPlaintext | characters : 130 }}</p>\n            <p><strong>{{item.pubdate | date : \'dd/MM/yyyy à HH:mm\' }}</strong></p>\n        </div>\n    </div>\n\n    <div ng-show="pic.podcast.totalItems > pic.itemPerPage" class="text-center">\n        <pagination items-per-page="pic.itemPerPage" max-size="10" boundary-links="true" total-items="pic.podcast.totalItems" ng-model="pic.currentPage" ng-change="pic.loadPage()" class="pagination pagination-centered" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\n    </div>\n</div>\n\n        ')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcast-details-stats.html",'<br/>\n<div>\n    <div class="input-group col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5 col-md-2 col-lg-2 col-xs-2 col-sm-2">\n        <a class="input-group-addon" ng-click="pdsc.navigate(-1)"> - </a>\n        <input type="number" class="form-control text-center" placeholder="Number of Month" ng-model="pdsc.month" ng-change="pdsc.generateChartData()" ng-model-options="{ debounce: 300 }">\n        <a class="input-group-addon" ng-click="pdsc.navigate(1)"> + </a>\n    </div>\n</div>\n<div class="row">\n    <highchart id="statsOfPodcast" config="pdsc.chartConfig"></highchart>\n</div>\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcast-details-upload.html",'<br/>\n<div class="upload-item">\n    <div class="drop-box"\n         ng-file-drop="onFileSelect($files)"\n         ng-file-drag-over-class="dropping"\n         ng-file-drag-over-delay="100">\n        <div class="text-center clearfix upload-text">\n            Déposer un ou des fichiers ici\n        </div>\n    </div>\n</div>\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/podcasts-list.html",'<div class="container podcastlist">\n\n    <div class="form-inline search-bar row">\n        <div class="form-group">\n            <div class="input-group">\n                <div class="input-group-addon"><i class="glyphicon glyphicon-search"></i></div>\n                <input type="text" class="form-control" ng-model="plc.filters.title" placeholder="Recherche globale" ng-model-options="{ debounce: 500 }">\n            </div>\n        </div>\n\n        <div class="form-group">\n            <!-- glyphicon glyphicon-download -->\n            <div class="input-group">\n                <div class="input-group-addon"><i class="glyphicon glyphicon-download"></i></div>\n                <select class="form-control" ng-model="plc.filters.type">\n                    <option value>All</option>\n                    <option value="BeInSports">Be In Sports</option>\n                    <option value="CanalPlus">Canal+</option>\n                    <option value="JeuxVideoCom">Jeux Video Com</option>\n                    <option value="JeuxVideoFR">Jeux Video Fr</option>\n                    <option value="Parleys">Parleys</option>\n                    <option value="Pluzz">Pluzz</option>\n                    <option value="RSS">RSS</option>\n                    <option value="send">Send</option>\n                    <option value="Youtube">Youtube</option>\n                </select>\n            </div>\n        </div>\n\n    </div>\n\n\n    <div class="row">\n        <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6 thumb" ng-repeat="podcast in plc.podcasts | filter: plc.filters | orderBy:\'-lastUpdate\'">\n            <a ng-href="/podcasts/{{ ::podcast.id }}" >\n                <img    class="img-responsive img-rounded" ng-src="{{ ::podcast.cover.url}}" width="{{ ::podcast.cover.width }}" height="{{ ::podcast.cover.height }}"\n                        notooltip-append-to-body="true" tooltip-placement="bottom" tooltip="{{ ::podcast.title }}"\n                        />\n            </a>\n        </div>\n    </div>\n</div>\n\n')}])}(),function(t){try{t=angular.module("ps.partial")}catch(e){t=angular.module("ps.partial",[])}t.run(["$templateCache",function(t){t.put("html/stats.html",'<div class="container">\n    <br/>\n    <div>\n        <div class="input-group col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5 col-md-2 col-lg-2 col-xs-2 col-sm-2">\n            <a class="input-group-addon" ng-click="sc.navigate(-1)"> - </a>\n            <input type="number" class="form-control text-center" placeholder="Number of Month" ng-model="sc.month" ng-change="sc.generateChartData()" ng-model-options="{ debounce: 300 }">\n            <a class="input-group-addon" ng-click="sc.navigate(1)"> + </a>\n        </div>\n    </div>\n    <div class="row">\n        <highchart id="statsByType" config="sc.chartConfig"></highchart>\n    </div>\n</div>')}])}();var l=function(){function n(t,a,i){var o=this;e(this,n),this.DonwloadManager=a,this.$notification=i,this.items=[],this.waitingitems=[],this.numberOfSimDl=0,this.DonwloadManager.getNumberOfSimDl().then(function(t){o.numberOfSimDl=parseInt(t)}),this.DonwloadManager.ws.subscribe("/app/download",function(t){return o.onSubscribeDownload(t)},t).subscribe("/app/waiting",function(t){return o.onSubscribeWaiting(t)},t).subscribe("/topic/download",function(t){return o.onDownloadUpdate(t)},t).subscribe("/topic/waiting",function(t){return o.onWaitingUpdate(t)},t)}return n.$inject=["$scope","DonwloadManager","$notification"],t(n,[{key:"onSubscribeDownload",value:function(t){this.items=JSON.parse(t.body)}},{key:"onSubscribeWaiting",value:function(t){this.waitingitems=JSON.parse(t.body)}},{key:"onDownloadUpdate",value:function(t){var e=JSON.parse(t.body),n=_.find(this.items,{id:e.id});switch(e.status){case"Started":case"Paused":n?_.assign(n,e):this.items.push(e);break;case"Finish":try{this.$notification("Téléchargement terminé",{body:e.title,icon:e.cover.url,delay:5e3})}catch(a){}this.onStoppedFromWS(n);break;case"Stopped":this.onStoppedFromWS(n)}}},{key:"onStoppedFromWS",value:function(t){t&&_.remove(this.items,function(e){return e.id===t.id})}},{key:"onWaitingUpdate",value:function(t){var e=JSON.parse(t.body);_.updateinplace(this.waitingitems,e,function(t,e){return _.findIndex(t,{id:e.id})},!0)}},{key:"getTypeFromStatus",value:function(t){return"Paused"===t.status?"warning":"info"}},{key:"updateNumberOfSimDl",value:function(t){this.DonwloadManager.updateNumberOfSimDl(t)}},{key:"download",value:function(t){this.DonwloadManager.download(t)}},{key:"stopDownload",value:function(t){this.DonwloadManager.ws.stop(t)}},{key:"toggleDownload",value:function(t){this.DonwloadManager.ws.toggle(t)}},{key:"stopAllDownload",value:function(){this.DonwloadManager.stopAllDownload()}},{key:"pauseAllDownload",value:function(){this.DonwloadManager.pauseAllDownload()}},{key:"restartAllCurrentDownload",value:function(){this.DonwloadManager.restartAllCurrentDownload()}},{key:"removeFromQueue",value:function(t){this.DonwloadManager.removeFromQueue(t)}},{key:"dontDonwload",value:function(t){this.DonwloadManager.dontDonwload(t)}},{key:"moveInWaitingList",value:function(t,e){this.DonwloadManager.moveInWaitingList(t,e)}}]),n}();angular.module("ps.download",["ps.config.route","ps.dataService.donwloadManager","notification"]).config(["$routeProvider","commonKey",function(t,e){return t.when("/download",{templateUrl:"html/download.html",controller:"DownloadCtrl",controllerAs:"dc",hotkeys:e})}]).controller("DownloadCtrl",l);var r=function(){function n(t,a,i,o,s,l){var r=this;e(this,n),this.item=l,this.$location=i,this.item.podcast=s,this.playlistService=o,this.DonwloadManager=a;var c="/topic/podcast/".concat(this.item.podcast.id);this.DonwloadManager.ws.subscribe(c,function(t){var e=JSON.parse(t.body);e.id==r.item.id&&_.assign(r.item,e)},t)}return n.$inject=["$scope","DonwloadManager","$location","playlistService","podcast","item"],t(n,[{key:"stopDownload",value:function(t){this.DonwloadManager.ws.stop(t)}},{key:"toggleDownload",value:function(t){this.DonwloadManager.ws.toggle(t)}},{key:"remove",value:function(t){var e=this;return t.remove().then(function(){e.playlistService.remove(t),e.$location.path("/podcasts/".concat(e.item.podcast.id))})}},{key:"reset",value:function(t){var e=this;return t.reset().then(function(n){_.assign(e.item,n),e.playlistService.remove(t)})}},{key:"toggleInPlaylist",value:function(){this.playlistService.addOrRemove(this.item)}},{key:"isInPlaylist",value:function(){return this.playlistService.contains(this.item)}}]),n}();angular.module("ps.item.details",["ps.dataService.donwloadManager","ps.player"]).config(["$routeProvider","commonKey",function(t,e){t.when("/podcasts/:podcastId/item/:itemId",{templateUrl:"html/item-detail.html",controller:"ItemDetailCtrl",controllerAs:"idc",hotkeys:e,resolve:{item:["itemService","$route",function(t,e){return t.findById(e.current.params.podcastId,e.current.params.itemId)}],podcast:["podcastService","$route",function(t,e){return t.findById(e.current.params.podcastId)}]}})}]).controller("ItemDetailCtrl",r),angular.module("ps.item",["ps.item.details","ps.item.player"]);var c=function L(t,n,a,i){e(this,L),this.item=n,this.item.podcast=t,this.$timeout=a,this.config={autoPlay:!0,sources:[{src:this.item.proxyURL,type:this.item.mimeType}],plugins:{controls:{autoHide:!i.isTouchedDevice(),autoHideTime:2e3},poster:this.item.cover.url}}};c.$inject=["podcast","item","$timeout","deviceDetectorService"],angular.module("ps.item.player",["ngSanitize","ngRoute","device-detection","com.2fdevs.videogular","com.2fdevs.videogular.plugins.poster","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.buffering"]).config(["$routeProvider",function(t){t.when("/podcasts/:podcastId/item/:itemId/play",{templateUrl:"html/item-player.html",controller:"ItemPlayerController",controllerAs:"ipc",resolve:{item:["itemService","$route",function(t,e){return t.findById(e.current.params.podcastId,e.current.params.itemId)}],podcast:["podcastService","$route",function(t,e){return t.findById(e.current.params.podcastId)}]}})}]).controller("ItemPlayerController",c);var d=function(){function n(t,a,i){e(this,n),this.playlistService=t,this.$timeout=a,this.playlist=[],this.state=null,this.API=null,this.currentVideo={},this.config={autoPlay:!0,sources:[],plugins:{controls:{autoHide:!i.isTouchedDevice(),autoHideTime:2e3},poster:""}},this.reloadPlaylist()}return n.$inject=["playlistService","$timeout","deviceDetectorService"],t(n,[{key:"onPlayerReady",value:function(t){this.API=t,("play"==this.API.currentState||this.isCompleted)&&this.API.play(),this.isCompleted=!1,this.setVideo(0)}},{key:"onCompleteVideo",value:function(){var t=this.getIndexOfVideoInPlaylist(this.currentVideo);return this.isCompleted=!0,t+1===this.playlist.length?void(this.currentVideo=this.playlist[0]):void this.setVideo(t+1)}},{key:"reloadPlaylist",value:function(){_.updateinplace(this.playlist,this.playlistService.playlist(),function(t,e){return _.findIndex(t,{id:e.id})})}},{key:"setVideo",value:function(t){this.currentVideo=this.playlist[t],null!==this.currentVideo&&void 0!==this.currentVideo&&(this.API.stop(),this.config.sources=[{src:this.currentVideo.proxyURL,type:this.currentVideo.mimeType}],this.config.plugins.poster=this.currentVideo.cover.url)}},{key:"remove",value:function(t){this.playlistService.remove(t),this.reloadPlaylist(),this.config.sources.length>0&&this.config.sources[0].src===t.proxyURL&&this.setVideo(0)}},{key:"removeAll",value:function(){this.playlistService.removeAll(),this.reloadPlaylist()}},{key:"getIndexOfVideoInPlaylist",value:function(t){return this.playlist.indexOf(t)}}]),n}();angular.module("ps.player",["ngSanitize","ngRoute","device-detection","com.2fdevs.videogular","com.2fdevs.videogular.plugins.poster","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.buffering","ps.player.playlist"]).config(["$routeProvider",function(t){t.when("/player",{templateUrl:"html/player.html",controller:"PlayerController",controllerAs:"pc"})}]).controller("PlayerController",d);var u=function(){function n(t){e(this,n),this.$localStorage=t,this.$localStorage.playlist=this.$localStorage.playlist||[]}return n.$inject=["$localStorage"],t(n,[{key:"playlist",value:function(){return this.$localStorage.playlist}},{key:"add",value:function(t){this.$localStorage.playlist.push(t)}},{key:"remove",value:function(t){this.$localStorage.playlist=_.remove(this.$localStorage.playlist,function(e){return e.id!==t.id})}},{key:"contains",value:function(t){return angular.isObject(_.find(this.$localStorage.playlist,{id:t.id}))}},{key:"addOrRemove",value:function(t){this.contains(t)?this.remove(t):this.add(t)}},{key:"removeAll",value:function(){this.$localStorage.playlist=[]}}]),n}();angular.module("ps.player.playlist",["ngStorage"]).service("playlistService",u);var p=function(){function n(t,a,i,o,s){e(this,n),this.podcastService=o,this.$location=t,this.tagService=i,this.podcast=angular.extend(this.podcastService.getNewPodcast(),a),this.types=s}return n.$inject=["$location","defaultPodcast","tagService","podcastService","types"],t(n,[{key:"findInfo",value:function(){var t=this;return this.podcastService.findInfo(this.podcast.url).then(function(e){t.podcast.title=e.title,t.podcast.description=e.description,t.podcast.type=e.type,t.podcast.cover.url=e.cover.url})}},{key:"loadTags",value:function(t){return this.tagService.search(t)}},{key:"changeType",value:function(){this.podcast.type=/beinsports\.fr/i.test(this.podcast.url)?"BeInSports":/canalplus\.fr/i.test(this.podcast.url)?"CanalPlus":/jeuxvideo\.fr/i.test(this.podcast.url)?"JeuxVideoFR":/jeuxvideo\.com/i.test(this.podcast.url)?"JeuxVideoCom":/parleys\.com/i.test(this.podcast.url)?"Parleys":/pluzz\.francetv\.fr/i.test(this.podcast.url)?"Pluzz":/youtube\.com/i.test(this.podcast.url)?"Youtube":this.podcast.url.length>0?"RSS":"Send"}},{key:"save",value:function(){var t=this;this.podcastService.save(this.podcast).then(function(e){return t.$location.path("/podcasts/"+e.id)})}}]),n}();angular.module("ps.podcast.creation",["ps.config.route","ps.dataservice","ngTagsInput"]).config(["$routeProvider","commonKey",function(t,e){t.when("/podcast-creation",{templateUrl:"html/podcast-creation.html",controller:"PodcastAddCtrl",controllerAs:"pac",hotkeys:e,resolve:{types:["typeService",function(t){return t.findAll()}]}})}]).constant("defaultPodcast",{hasToBeDeleted:!0,cover:{height:200,width:200}}).controller("PodcastAddCtrl",p);var g=function U(t){e(this,U),this.podcasts=t,this.filters={title:"",type:""}};g.$inject=["podcasts"],angular.module("ps.podcast.list",["ps.config.route","ps.dataService.podcast"]).config(["$routeProvider","commonKey",function(t,e){t.when("/podcasts",{templateUrl:"html/podcasts-list.html",controller:"PodcastsListCtrl",controllerAs:"plc",hotkeys:e,resolve:{podcasts:["podcastService",function(t){return t.findAll()}]}})}]).controller("PodcastsListCtrl",g),angular.module("ps.podcast",["ps.podcast.details","ps.podcast.creation","ps.podcast.list"]);var h=function(){function n(t,a){e(this,n),this.$sessionStorage=a,this.$sessionStorage.searchParameters=t}return n.$inject=["DefaultItemSearchParameters","$sessionStorage"],t(n,[{key:"getParameters",value:function(){return this.$sessionStorage.searchParameters}},{key:"page",value:function(t){return angular.isNumber(t)&&(this.$sessionStorage.searchParameters.page=t),this.$sessionStorage.searchParameters.page}},{key:"size",value:function(t){return angular.isNumber(t)&&(this.$sessionStorage.searchParameters.size=t),this.$sessionStorage.searchParameters.size}},{key:"updateSearchParam",value:function(t){this.$sessionStorage.searchParameters.term=t.term,this.$sessionStorage.searchParameters.tags=t.tags,this.$sessionStorage.searchParameters.direction=t.direction,this.$sessionStorage.searchParameters.properties=t.properties}}]),n}(),m=function(){function n(t,a,i,o,s,l,r,c){var d=this;e(this,n),this.$location=i,this.itemService=o,this.tagService=s,this.DownloadManager=l,this.playlistService=r,this.SearchItemCache=a,this.totalItems=Number.MAX_VALUE,this.maxSize=10,this.currentPage=this.SearchItemCache.page()+1,this.searchParameters=this.SearchItemCache.getParameters(),this.DownloadManager.ws.subscribe("/topic/download",function(t){return d.updateItemFromWS(t)},t),t.$on("$routeUpdate",function(){d.currentPage!==d.$location.search().page&&(d.currentPage=d.$location.search().page||1,d.changePage())}),this.attachResponse(c)}return n.$inject=["$scope","SearchItemCache","$location","itemService","tagService","DonwloadManager","playlistService","items"],t(n,[{key:"updateItemFromWS",value:function(t){var e=JSON.parse(t.body),n=_.find(this.items,{id:e.id});n&&_.assign(n,e)}},{key:"changePage",value:function(){var t=this;return this.SearchItemCache.page(this.calculatePage()),this.itemService.search(this.SearchItemCache.getParameters()).then(function(e){return t.attachResponse(e)})}},{key:"attachResponse",value:function(t){this.items=t.content,this.totalPages=t.totalPages,this.totalItems=t.totalElements,this.currentPage=this.SearchItemCache.page(t.number)+1,this.$location.search("page",this.currentPage)}},{key:"swipePage",value:function(t){return this.currentPage=this.SearchItemCache.page()+t+1,this.changePage()}},{key:"remove",value:function(t){var e=this;return t.remove().then(function(){return e.playlistService.remove(t)}).then(function(){return e.changePage()})}},{key:"reset",value:function(t){var e=this;return t.reset().then(function(t){var n=_.find(e.items,{id:t.id});return _.assign(n,t),n}).then(function(t){return e.playlistService.remove(t)})}},{key:"stopDownload",value:function(t){this.DownloadManager.ws.stop(t)}},{key:"toggleDownload",value:function(t){return this.DownloadManager.ws.toggle(t)}},{key:"loadTags",value:function(t){return this.tagService.search(t)}},{key:"addOrRemove",value:function(t){return this.playlistService.addOrRemove(t)}},{key:"isInPlaylist",value:function(t){return this.playlistService.contains(t)}},{key:"calculatePage",value:function(){return this.currentPage<=1?0:this.currentPage>Math.ceil(this.totalItems/this.SearchItemCache.size())?Math.ceil(this.totalItems/this.SearchItemCache.size())-1:this.currentPage-1}},{key:"resetSearch",value:function(){return this.currentPage=1,this.SearchItemCache.updateSearchParam(this.searchParameters),this.changePage()}}]),n}();angular.module("ps.search.item",["ps.dataService.donwloadManager","ps.dataService.item","ps.dataService.tag","ps.player","ps.config.route","ngTagsInput","ngStorage"]).config(["$routeProvider","commonKey",function(t,e){t.when("/items",{templateUrl:"html/items-search.html",controller:"ItemsSearchCtrl",controllerAs:"isc",reloadOnSearch:!1,hotkeys:[["right","Next page","isc.swipePage(1)"],["left","Previous page","isc.swipePage(-1)"]].concat(e),resolve:{items:["itemService","SearchItemCache",function(t,e){return t.search(e.getParameters())}]}})}]).constant("DefaultItemSearchParameters",{page:0,size:12,term:void 0,tags:void 0,direction:"DESC",properties:"pubdate"}).controller("ItemsSearchCtrl",m).service("SearchItemCache",h),angular.module("ps.search",["ps.search.item"]);var v=function(){function n(t,a){e(this,n),this.statService=t,this.month=1,this.chartSeries=[],this.transform(a),this.chartConfig={options:{chart:{type:"spline"},plotOptions:{spline:{marker:{enabled:!0}}},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"},title:{text:"Date"}}},series:this.chartSeries,title:{text:""},credits:{enabled:!1},loading:!1}}return n.$inject=["statService","stats"],t(n,[{key:"transform",value:function(t){var e=this;_.updateinplace(this.chartSeries,[]),angular.forEach(t,function(t){var a={name:t.type};a.data=_(t.values).map(n.dateMapper()).sortBy("date").map(n.highChartsMapper()).value(),e.chartSeries.push(a)})}},{key:"navigate",value:function(t){this.month+=t,this.generateChartData()}},{key:"generateChartData",value:function(){var t=this;return this.statService.statsByType(this.month).then(function(e){return t.transform(e)})}}],[{key:"dateMapper",value:function(){return function(t){return{date:Date.UTC(t.date[0],t.date[1]-1,t.date[2]),numberOfItems:t.numberOfItems}}}},{key:"highChartsMapper",value:function(){return function(t){return[t.date,t.numberOfItems]}}}]),n}();angular.module("ps.stats",["ps.dataService.stat"]).config(["$routeProvider","commonKey",function(t,e){t.when("/stats",{templateUrl:"html/stats.html",controller:"StatsController",controllerAs:"sc",hotkeys:e,resolve:{stats:["statService",function(t){return t.statsByType()}]}})}]).controller("StatsController",v),angular.module("ps.dataservice",["ps.dataService.donwloadManager","ps.dataService.item","ps.dataService.podcast","ps.dataService.tag","ps.dataService.type","ps.dataService.updateService"]);var f=function(){function n(t,a){e(this,n),this.WS_DOWNLOAD_BASE=t,this.ngstomp=a}return t(n,[{key:"connect",value:function(){return this.ngstomp.connect()}},{key:"subscribe",value:function(t,e,n){return this.ngstomp.subscribe(t,e,n)}},{key:"unsubscribe",value:function(t){return this.ngstomp.unsubscribe(t)}},{key:"toggle",value:function(t){return this.ngstomp.send(this.WS_DOWNLOAD_BASE+"/toogle",t)}},{key:"start",value:function(t){return this.ngstomp.send(this.WS_DOWNLOAD_BASE+"/start",t)}},{key:"pause",value:function(t){return this.ngstomp.send(this.WS_DOWNLOAD_BASE+"/pause",t)}},{key:"stop",value:function(t){return this.ngstomp.send(this.WS_DOWNLOAD_BASE+"/stop",t)}}]),n}(),y=function(){function n(t,a){e(this,n),this.Restangular=t,this.baseTask=this.Restangular.one("task"),this.baseDownloadManager=this.baseTask.one("downloadManager"),this.WS_DOWNLOAD_BASE="/app/download",this.ws=new f(this.WS_DOWNLOAD_BASE,a)}return n.$inject=["Restangular","ngstomp"],t(n,[{key:"download",value:function(t){return this.Restangular.one("item").customGET(t.id+"/addtoqueue")}},{key:"stopDownload",value:function(t){return this.baseDownloadManager.customPOST(t.id,"stopDownload")}},{key:"toggleDownload",value:function(t){return this.baseDownloadManager.customPOST(t.id,"toogleDownload")}},{key:"stopAllDownload",value:function(){return this.baseDownloadManager.customGET("stopAllDownload")}},{key:"pauseAllDownload",value:function(){return this.baseDownloadManager.customGET("pauseAllDownload")}},{key:"restartAllCurrentDownload",value:function(){return this.baseDownloadManager.customGET("restartAllCurrentDownload")}},{key:"removeFromQueue",value:function(t){return this.baseDownloadManager.customDELETE("queue/"+t.id)}},{key:"updateNumberOfSimDl",value:function(t){return this.baseDownloadManager.customPOST(t,"limit")}},{key:"dontDonwload",value:function(t){return this.baseDownloadManager.customDELETE("queue/"+t.id+"/andstop")}},{key:"getDownloading",value:function(){return this.baseTask.all("downloadManager/downloading").getList()}},{key:"getNumberOfSimDl",value:function(){return this.baseDownloadManager.one("limit").get()}},{key:"moveInWaitingList",value:function(t,e){this.baseDownloadManager.customPOST({id:t.id,position:e},"move")}}]),n}();angular.module("ps.dataService.donwloadManager",["restangular","AngularStompDK"]).service("DonwloadManager",y);var b=function(){function n(t){e(this,n),this.Restangular=t}return n.$inject=["Restangular"],t(n,[{key:"search",value:function(){var t=this,e=void 0===arguments[0]?{page:0,size:12}:arguments[0];return this.Restangular.one("item/search").post(null,e).then(function(e){return e.content=t.restangularizedItems(e.content),e})}},{key:"findById",value:function(t,e){return this.Restangular.one("podcast",t).one("items",e).get()}},{key:"getItemForPodcastWithPagination",value:function(t,e){return t.one("items").post(null,e)}},{key:"restangularizePodcastItem",value:function(t,e){return this.Restangular.restangularizeCollection(t,e,"items")}},{key:"restangularizedItems",
value:function(t){var e=this,n=[];return angular.forEach(t,function(t){n.push(e.Restangular.restangularizeElement(e.Restangular.one("podcast",t.podcastId),t,"items"))}),n}}]),n}();angular.module("ps.dataService.item",["restangular"]).service("itemService",b);var w=function(){function n(t){e(this,n),this.Restangular=t,this.route="podcast"}return n.$inject=["Restangular"],t(n,[{key:"findById",value:function(t){return this.Restangular.one(this.route,t).get()}},{key:"findAll",value:function(){return this.Restangular.all(this.route).getList()}},{key:"save",value:function(t){return t.save()}},{key:"getNewPodcast",value:function(){return this.Restangular.one(this.route)}},{key:"patch",value:function(t){return t.patch()}},{key:"deletePodcast",value:function(t){return t.remove()}},{key:"findInfo",value:function(t){return this.Restangular.one(this.route).findInfo(t)}},{key:"statsByPubdate",value:function(t){var e=void 0===arguments[1]?6:arguments[1];return this.Restangular.one(this.route,t).one("stats").all("byPubdate").post(e)}},{key:"statsByByDownloaddate",value:function(t){var e=void 0===arguments[1]?6:arguments[1];return this.Restangular.one(this.route,t).one("stats").all("byDownloaddate").post(e)}}]),n}();angular.module("ps.dataService.podcast",["restangular"]).config(["RestangularProvider",function(t){t.addElementTransformer("podcast",!1,function(t){return t.addRestangularMethod("findInfo","post","fetch",void 0,{"Content-Type":"text/plain"}),t})}]).service("podcastService",w);var S=function(){function n(t){e(this,n),this.Restangular=t,this.base=this.Restangular.one("stats")}return n.$inject=["Restangular"],t(n,[{key:"statsByType",value:function(){var t=void 0===arguments[0]?1:arguments[0];return this.base.all("byType").post(t)}}]),n}();angular.module("ps.dataService.stat",["restangular"]).service("statService",S);var P=function(){function n(t){e(this,n),this.baseAll=t.all("tag")}return n.$inject=["Restangular"],t(n,[{key:"getAll",value:function(){return this.baseAll.get()}},{key:"search",value:function(t){return this.baseAll.post(null,{name:t})}}]),n}();angular.module("ps.dataService.tag",["restangular"]).service("tagService",P);var k=function(){function n(t){e(this,n),this.baseAll=t.all("types")}return n.$inject=["Restangular"],t(n,[{key:"findAll",value:function(){return this.baseAll.getList()}}]),n}();angular.module("ps.dataService.type",["restangular"]).service("typeService",k);var D=function(){function n(t){e(this,n),this.Restangular=t}return n.$inject=["Restangular"],t(n,[{key:"forceUpdatePodcast",value:function(t){return this.Restangular.one("task").customPOST(t,"updateManager/updatePodcast/force")}}]),n}();angular.module("ps.dataService.updateService",["restangular"]).service("UpdateService",D);var $=function E(){e(this,E),this.restrict="E",this.templateUrl="html/podcast-details-edition.html",this.scope={podcast:"="},this.controller="podcastEditionCtrl",this.controllerAs="pec",this.bindToController=!0},x=function(){function n(t,a,i,o){e(this,n),this.$scope=t,this.$location=a,this.tagService=i,this.podcastService=o}return n.$inject=["$scope","$location","tagService","podcastService"],t(n,[{key:"loadTags",value:function(t){return this.tagService.search(t)}},{key:"save",value:function(){var t=this,e=_.cloneDeep(this.podcast);return e.items=null,this.podcastService.patch(e).then(function(e){return _.assign(t.podcast,e)}).then(function(){return t.$scope.$emit("podcastEdition:save")})}},{key:"deletePodcast",value:function(){var t=this;return this.podcastService.deletePodcast(this.podcast).then(function(){return t.$location.path("/podcasts")})}}]),n}();angular.module("ps.podcast.details.edition",["ps.dataService.podcast","ps.dataService.tag","ngTagsInput"]).directive("podcastEdition",function(){return new $}).controller("podcastEditionCtrl",x);var I=function B(){e(this,B),this.restrict="E",this.templateUrl="html/podcast-details-episodes.html",this.scope={podcast:"="},this.controller="podcastItemsListCtrl",this.controllerAs="pic",this.bindToController=!0},C=function(){function n(t,a,i,o,s){var l=this;e(this,n),this.$scope=t,this.DownloadManager=a,this.itemService=o,this.playlistService=s,this.currentPage=1,this.itemPerPage=i,this.loadPage(),this.$scope.$on("podcastItems:refresh",function(){l.currentPage=1,l.loadPage()}),this.DownloadManager.ws.subscribe("/topic/podcast/".concat(this.podcast.id),function(t){return l.onMessageFromWS(t)},t)}return n.$inject=["$scope","DonwloadManager","PodcastItemPerPage","itemService","playlistService"],t(n,[{key:"onMessageFromWS",value:function(t){var e=JSON.parse(t.body),n=_.find(this.podcast.items,{id:e.id});_.assign(n,e)}},{key:"loadPage",value:function(){var t=this;return this.currentPage=this.currentPage<1?1:this.currentPage>Math.ceil(this.totalItems/this.itemPerPage)?Math.ceil(this.totalItems/this.itemPerPage):this.currentPage,this.itemService.getItemForPodcastWithPagination(this.podcast,{size:this.itemPerPage,page:this.currentPage-1,direction:"DESC",properties:"pubdate"}).then(function(e){t.podcast.items=t.itemService.restangularizePodcastItem(t.podcast,e.content),t.podcast.totalItems=e.totalElements})}},{key:"remove",value:function(t){var e=this;t.remove().then(function(){return e.podcast.items=_.reject(e.podcast.items,function(e){return e.id===t.id})}).then(function(){return e.playlistService.remove(t)}).then(function(){return e.loadPage()})}},{key:"reset",value:function(t){var e=this;return t.reset().then(function(t){var n=_.find(e.podcast.items,{id:t.id});return _.assign(n,t),n}).then(function(t){return e.playlistService.remove(t)})}},{key:"addOrRemoveInPlaylist",value:function(t){this.playlistService.addOrRemove(t)}},{key:"isInPlaylist",value:function(t){return this.playlistService.contains(t)}},{key:"swipePage",value:function(t){this.currentPage+=t,this.loadPage()}},{key:"stopDownload",value:function(t){this.DownloadManager.ws.stop(t)}},{key:"toggleDownload",value:function(t){this.DownloadManager.ws.toggle(t)}}]),n}();angular.module("ps.podcast.details.episodes",["ps.player"]).directive("podcastItemsList",function(){return new I}).constant("PodcastItemPerPage",10).controller("podcastItemsListCtrl",C);var T=function(){function n(t,a,i){var o=this;e(this,n),this.$scope=t,this.UpdateService=i,this.podcast=a,this.podcastTabs=[{heading:"Episodes",active:!0},{heading:"Edition",active:!1},{heading:"Upload",disabled:"send"!==this.podcast.type},{heading:"Stats",active:!1}],this.$scope.$on("podcastEdition:save",function(){return o.refreshItems()})}return n.$inject=["$scope","podcast","UpdateService"],t(n,[{key:"refreshItems",value:function(){this.$scope.$broadcast("podcastItems:refresh")}},{key:"refresh",value:function(){var t=this;this.UpdateService.forceUpdatePodcast(this.podcast.id).then(function(){return t.refreshItems()})}},{key:"tabsActive",value:function(t){this.podcastTabs[t].active=!0}}]),n}();angular.module("ps.podcast.details",["ps.config.route","ps.podcast.details","ps.podcast.details.episodes","ps.podcast.details.edition","ps.podcast.details.upload","ps.podcast.details.stats","ps.dataService.updateService"]).config(["$routeProvider","commonKey",function(t,e){return t.when("/podcasts/:podcastId",{templateUrl:"html/podcast-detail.html",controller:"PodcastDetailCtrl",controllerAs:"pdc",hotkeys:e,resolve:{podcast:["podcastService","$route",function(t,e){return t.findById(e.current.params.podcastId)}]}})}]).controller("PodcastDetailCtrl",T);var A=function z(){e(this,z),this.restrict="E",this.scope={podcast:"="},this.templateUrl="html/podcast-details-stats.html",this.controller="PodcastDetailsStatsCtrl",this.controllerAs="pdsc",this.bindToController=!0},R=function(){function n(t,a,i){var o=this;e(this,n),this.$q=a,this.podcastService=i,this.month=6,this.chartSeries=[],this.generateChartData(),this.chartConfig={options:{chart:{type:"spline"},plotOptions:{spline:{marker:{enabled:!0}}},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"},title:{text:"Date"}}},series:this.chartSeries,title:{text:""},credits:{enabled:!1},loading:!1},t.$on("podcastItems:refresh",function(){return o.generateChartData()})}return n.$inject=["$scope","$q","podcastService"],t(n,[{key:"navigate",value:function(t){return this.month+=t,this.generateChartData()}},{key:"generateChartData",value:function(){var t=this;return n.resetChart(this.chartSeries),this.$q.all([this.podcastService.statsByByDownloaddate(this.podcast.id,this.month),this.podcastService.statsByPubdate(this.podcast.id,this.month)]).then(function(e){var a=_(e[0]).map(n.dateMapper()).sortBy("date").map(n.highChartsMapper()).value(),i=_(e[1]).map(n.dateMapper()).sortBy("date").map(n.highChartsMapper()).value();return t.chartSeries.push({name:"Download Date",data:a}),t.chartSeries.push({name:"Publication Date",data:i}),t.chartSeries})}}],[{key:"resetChart",value:function(t){_.updateinplace(t,[])}},{key:"dateMapper",value:function(){return function(t){return{date:Date.UTC(t.date[0],t.date[1]-1,t.date[2]),numberOfItems:t.numberOfItems}}}},{key:"highChartsMapper",value:function(){return function(t){return[t.date,t.numberOfItems]}}}]),n}();angular.module("ps.podcast.details.stats",["highcharts-ng"]).directive("podcastStats",function(){return new A}).controller("PodcastDetailsStatsCtrl",R),angular.module("ps.podcast.details.upload",["angularFileUpload"]).directive("podcastUpload",function(){return{restrcit:"E",templateUrl:"html/podcast-details-upload.html",scope:{podcast:"="},controller:"podcastUploadCtrl"}}).controller("podcastUploadCtrl",["$scope","$log",function(t,e){t.onFileSelect=function(n){var a;angular.forEach(n,function(n){a=new FormData,a.append("file",n),t.podcast.all("items").withHttpConfig({transformRequest:angular.identity}).customPOST(a,"upload",void 0,{"Content-Type":void 0}).then(function(t){e.info("Upload de l'item suivant"),e.info(t)})})}}])}();
//# sourceMappingURL=all.min.js.map